<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sunwin AI Tool</title>

<style>
body {
    margin:0;
    font-family: Arial, sans-serif;
    background:#f3f3f3;
}

.header {
    background:#7b1fa2;
    color:#fff;
    padding:12px;
    font-weight:bold;
}

.container {
    padding:15px;
}

.tool {
    max-width:420px;
    margin:30px auto;
    padding:20px;
    border-radius:20px;
    color:#fff;
    position:relative;
}

.sun { background:linear-gradient(135deg,#f9a825,#f57f17); }
.tx  { background:linear-gradient(135deg,#c62828,#e53935); }

.logo {
    width:50px;height:50px;
    border-radius:12px;
    position:absolute;
    top:-25px;left:50%;
    transform:translateX(-50%);
}

.row {
    display:flex;
    justify-content:space-between;
    align-items:center;
}

.circle {
    width:90px;height:90px;
    border-radius:50%;
    background:#fff;
    color:#000;
    display:flex;
    flex-direction:column;
    justify-content:center;
    align-items:center;
}

.center {
    text-align:center;
}

.mid {
    background:#000;
    padding:6px 14px;
    border-radius:10px;
    margin-bottom:6px;
}

.percent {
    font-size:13px;
    margin-top:5px;
}

.blink {
    animation: blink 0.8s infinite;
}

@keyframes blink {
    0% { box-shadow:0 0 5px #fff; }
    50% { box-shadow:0 0 25px #fff; }
    100% { box-shadow:0 0 5px #fff; }
}

iframe {
    width:100%;
    height:500px;
    border:none;
    border-radius:15px;
    margin-top:25px;
}
</style>
</head>

<body>

<div class="header">tranbinhzuka01</div>

<div class="container">

<div class="tool sun">
<img class="logo" src="https://i.imgur.com/6KQ8E5N.png">
<div class="row">
<div id="sun-tai" class="circle">
<strong>TÀI</strong>
<div id="sun-tai-p" class="percent">0%</div>
</div>

<div class="center">
<div class="mid">TOOL</div>
<div id="sun-phien">#----</div>
<div id="sun-ai"></div>
</div>

<div id="sun-xiu" class="circle">
<strong>XỈU</strong>
<div id="sun-xiu-p" class="percent">0%</div>
</div>
</div>
</div>

<div class="tool tx">
<img class="logo" src="https://i.imgur.com/QnN6ZcY.png">
<div class="row">
<div id="tx-tai" class="circle">
<strong>TÀI</strong>
<div id="tx-tai-p" class="percent">0%</div>
</div>

<div class="center">
<div class="mid">TOOL</div>
<div id="tx-phien">#----</div>
<div id="tx-ai"></div>
</div>

<div id="tx-xiu" class="circle">
<strong>XỈU</strong>
<div id="tx-xiu-p" class="percent">0%</div>
</div>
</div>
</div>

<iframe src="https://web.sunwin.sx/"></iframe>

</div>

<script>
const API = "https://sunwinsaygex-pcl2.onrender.com/api/sun";

function algoVotes(data) {
    let votes = [];

    // Algo 1: tổng 10 phiên
    let t=0,x=0;
    data.slice(0,10).forEach(i=> i.result.includes("T") ? t++ : x++);
    votes.push(t>x ? "TÀI":"XỈU");

    // Algo 2: bệt
    let streak = 1;
    for(let i=1;i<data.length;i++){
        if(data[i].result === data[i-1].result) streak++;
        else break;
    }
    votes.push(data[0].result);

    // Algo 3: đảo
    votes.push(data[0].result === "TÀI" ? "XỈU" : "TÀI");

    // Algo 4: 5 phiên
    t=0;x=0;
    data.slice(0,5).forEach(i=> i.result.includes("T") ? t++ : x++);
    votes.push(t>x ? "TÀI":"XỈU");

    // Algo 5: trọng số
    votes.push(data[0].result);

    return votes;
}

async function run() {
    const res = await fetch(API);
    const data = await res.json();

    const phien = data[0].phien || data[0].round;
    const votes = algoVotes(data);

    const tai = votes.filter(v=>v==="TÀI").length;
    const xiu = votes.length - tai;

    const taiP = Math.round(tai / votes.length * 100);
    const xiuP = 100 - taiP;

    ["sun","tx"].forEach(p=>{
        document.getElementById(p+"-phien").innerText = "#"+phien;
        document.getElementById(p+"-tai-p").innerText = taiP+"%";
        document.getElementById(p+"-xiu-p").innerText = xiuP+"%";

        document.getElementById(p+"-tai").classList.remove("blink");
        document.getElementById(p+"-xiu").classList.remove("blink");

        if (taiP > xiuP) {
            document.getElementById(p+"-tai").classList.add("blink");
            document.getElementById(p+"-ai").innerText = "AI: TÀI";
        } else {
            document.getElementById(p+"-xiu").classList.add("blink");
            document.getElementById(p+"-ai").innerText = "AI: XỈU";
        }
    });
}

run();
setInterval(run,5000);
</script>

</body>
</html>
